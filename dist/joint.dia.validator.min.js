/*! Rappid v2.4.0 - HTML5 Diagramming Framework - TRIAL VERSION

Copyright (c) 2015 client IO

 2019-03-27 


This Source Code Form is subject to the terms of the Rappid Trial License
, v. 2.0. If a copy of the Rappid License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the Rappid archive as was distributed by client IO. See the LICENSE file.*/


joint.dia.Validator=Backbone.Model.extend({initialize:function(a){this._map={},this._commandManager=a.commandManager,this.listenTo(this._commandManager,"add",this._onCommand)},defaults:{cancelInvalid:!0},_onCommand:function(a){return Array.isArray(a)?a.find(function(a){return!this._validateCommand(a)},this):this._validateCommand(a)},_validateCommand:function(a){if(a.options&&a.options.validation===!1)return!0;var b;return joint.util.toArray(this._map[a.action]).forEach(function(c){function d(f){var g=c[e++];try{if(!g)return void(b=f);g(f,a,d)}catch(f){d(f)}}var e=0;d(b)}),!b||(this.get("cancelInvalid")&&this._commandManager.cancel(),this.trigger("invalid",b),!1)},validate:function(a){var b=Array.prototype.slice.call(arguments,1);return b.forEach(function(b){if(!joint.util.isFunction(b))throw new Error(a+" requires callback functions.")}),a.split(" ").forEach(function(a){(this._map[a]=this._map[a]||[]).push(b)},this),this}});